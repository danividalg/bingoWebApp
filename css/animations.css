/* -------------------------------------------------------------------------- */
/*                                ANIMATIONS.CSS                              */
/*                      Glass Sphere Bingo Drum & Effects                     */
/* -------------------------------------------------------------------------- */

:root {
    --drum-size: 280px;
    /* Glass aesthetics */
    --color-glass-primary: rgba(255, 255, 255, 0.15);
    --color-glass-highlight: rgba(255, 255, 255, 0.4);
    --color-glass-rim: rgba(255, 255, 255, 0.3);
    --anim-spin-speed: 8s;
}

/* 3D STAGE */
.drum-stage {
    width: 100%;
    height: 300px;
    perspective: 1000px;
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: visible;
    position: relative;
    background: transparent;
}

/* GLASS SPHERE DRUM */
.drum {
    width: var(--drum-size);
    height: var(--drum-size);
    position: relative;
    transform-style: preserve-3d;
    border-radius: 50%;
    
    /* Glass sphere effect */
    background: 
        radial-gradient(ellipse 50% 30% at 30% 25%, rgba(255,255,255,0.5) 0%, transparent 50%),
        radial-gradient(ellipse 80% 80% at 50% 50%, rgba(100,150,200,0.1) 0%, rgba(50,80,120,0.05) 40%, transparent 70%),
        radial-gradient(circle at 50% 50%, rgba(180,200,220,0.08) 0%, rgba(100,120,140,0.15) 100%);
    
    /* Glass borders and shadows */
    box-shadow: 
        inset 0 0 60px rgba(255,255,255,0.1),
        inset 20px 20px 40px rgba(255,255,255,0.15),
        inset -20px -20px 40px rgba(0,0,0,0.2),
        0 15px 40px rgba(0,0,0,0.4),
        0 0 80px rgba(100,150,200,0.15);
    
    /* Subtle border */
    border: 2px solid rgba(255,255,255,0.2);
    
    /* Animation */
    animation: gentle-float 4s ease-in-out infinite;
}

/* Glass highlight overlay */
.drum::before {
    content: '';
    position: absolute;
    top: 5%;
    left: 10%;
    width: 35%;
    height: 25%;
    background: radial-gradient(ellipse at center, rgba(255,255,255,0.6) 0%, transparent 70%);
    border-radius: 50%;
    filter: blur(3px);
    pointer-events: none;
}

/* Bottom reflection */
.drum::after {
    content: '';
    position: absolute;
    bottom: 10%;
    right: 15%;
    width: 25%;
    height: 15%;
    background: radial-gradient(ellipse at center, rgba(255,255,255,0.2) 0%, transparent 70%);
    border-radius: 50%;
    filter: blur(2px);
    pointer-events: none;
}

/* DECORATIVE BALLS INSIDE */
.deco-ball {
    position: absolute;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, #fff 0%, var(--ball-color, #ff6b6b) 30%, var(--ball-color-dark, #c0392b) 100%);
    box-shadow: 
        inset -2px -2px 4px rgba(0,0,0,0.3),
        1px 1px 3px rgba(0,0,0,0.2);
    animation: tumble var(--tumble-duration, 3s) ease-in-out infinite;
    animation-delay: var(--delay, 0s);
}

/* Ball color variations */
.deco-ball:nth-child(1) { --ball-color: #e74c3c; --ball-color-dark: #c0392b; }
.deco-ball:nth-child(2) { --ball-color: #3498db; --ball-color-dark: #2980b9; }
.deco-ball:nth-child(3) { --ball-color: #2ecc71; --ball-color-dark: #27ae60; }
.deco-ball:nth-child(4) { --ball-color: #f39c12; --ball-color-dark: #d68910; }
.deco-ball:nth-child(5) { --ball-color: #9b59b6; --ball-color-dark: #8e44ad; }
.deco-ball:nth-child(6) { --ball-color: #1abc9c; --ball-color-dark: #16a085; }
.deco-ball:nth-child(7) { --ball-color: #e91e63; --ball-color-dark: #c2185b; }
.deco-ball:nth-child(8) { --ball-color: #00bcd4; --ball-color-dark: #0097a7; }

/* ANIMATIONS */
@keyframes gentle-float {
    0%, 100% { transform: translateY(0) rotateX(-5deg) rotateY(0deg); }
    50% { transform: translateY(-8px) rotateX(-5deg) rotateY(5deg); }
}

@keyframes tumble {
    0% { transform: translate3d(var(--x1, 0px), var(--y1, 0px), var(--z1, 0px)); }
    25% { transform: translate3d(var(--x2, 10px), var(--y2, -15px), var(--z2, 5px)); }
    50% { transform: translate3d(var(--x3, -5px), var(--y3, 5px), var(--z3, -10px)); }
    75% { transform: translate3d(var(--x4, 8px), var(--y4, 10px), var(--z4, 3px)); }
    100% { transform: translate3d(var(--x1, 0px), var(--y1, 0px), var(--z1, 0px)); }
}

.drum.is-spinning {
    animation: spin-shake 0.5s ease-in-out infinite;
}

@keyframes spin-shake {
    0%, 100% { transform: rotateX(-5deg) rotateY(0deg) rotateZ(0deg); }
    25% { transform: rotateX(-3deg) rotateY(10deg) rotateZ(2deg); }
    50% { transform: rotateX(-7deg) rotateY(-5deg) rotateZ(-1deg); }
    75% { transform: rotateX(-4deg) rotateY(8deg) rotateZ(1deg); }
}

.drum.paused {
    animation-play-state: paused;
}

/* EXTRACTION ANIMATION - Flying ball */
.flying-ball {
    position: absolute;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, #fff 0%, var(--color-accent) 30%, #c0392b 100%);
    color: #fff;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-family: var(--font-heading);
    font-size: 1.2rem;
    box-shadow: 
        0 0 30px var(--color-accent),
        inset -3px -3px 8px rgba(0,0,0,0.3);
    z-index: 100;
    animation: ball-extract 1.5s ease-out forwards;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
}

@keyframes ball-extract {
    0% {
        transform: scale(0.3) translateY(0);
        opacity: 0;
    }
    20% {
        transform: scale(0.6) translateY(-30px);
        opacity: 1;
    }
    60% {
        transform: scale(1) translateY(-80px) rotate(360deg);
    }
    100% {
        transform: scale(1.2) translateY(-100px) rotate(720deg);
        opacity: 0;
    }
}

/* HISTORY TRACK - Shows last 10 drawn balls (5 per row, 2 rows) */
.history-track {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 0.5rem;
    margin-top: 1.5rem;
    padding: 0.75rem;
    min-height: 60px;
    justify-items: center;
    align-content: start;
    background: rgba(0, 0, 0, 0.25);
    border-radius: 10px;
    border: 1px solid var(--color-border);
    width: 100%;
    max-width: 320px;
    margin-left: auto;
    margin-right: auto;
}

.history-track:empty {
    display: none;
}

.history-ball {
    width: 52px;
    height: 52px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, #666 0%, #2a2a2a 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: var(--font-mono);
    font-size: 1.1rem;
    font-weight: bold;
    color: #fff;
    box-shadow: 
        inset -3px -3px 6px rgba(0,0,0,0.5),
        0 3px 6px rgba(0,0,0,0.4);
    animation: pop-in 0.3s ease-out;
}

/* First ball (most recent) highlighted */
.history-ball:first-child {
    background: radial-gradient(circle at 30% 30%, var(--color-secondary) 0%, #1a1a1a 100%);
    box-shadow: 
        inset -3px -3px 6px rgba(0,0,0,0.4),
        0 0 12px var(--color-secondary);
    transform: scale(1.05);
}

@keyframes pop-in {
    0% { transform: scale(0); opacity: 0; }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); opacity: 1; }
}
